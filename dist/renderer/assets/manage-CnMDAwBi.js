import{r,j as t,c as b}from"./client-C9yhCDaK.js";const{ipcRenderer:y}=window.require("electron"),j=({onTaskAdded:o})=>{const[a,c]=r.useState(""),[d,e]=r.useState(""),[l,f]=r.useState(""),[n,s]=r.useState(""),[u,g]=r.useState("none"),k=async i=>{if(i.preventDefault(),!a||!d||!l)return;const m=await y.invoke("tasks:add",{title:a,start:d,end:l,description:n,repeat:u});c(""),e(""),f(""),s(""),g("none"),o&&o(m)};return t.jsxs("form",{className:"task-form",onSubmit:k,style:{marginBottom:16},children:[t.jsx("input",{type:"text",placeholder:"Title",value:a,onChange:i=>c(i.target.value),required:!0}),t.jsx("input",{type:"datetime-local",placeholder:"Start",value:d,onChange:i=>e(i.target.value),required:!0}),t.jsx("input",{type:"datetime-local",placeholder:"End",value:l,onChange:i=>f(i.target.value),required:!0}),t.jsx("input",{type:"text",placeholder:"Description (optional)",value:n,onChange:i=>s(i.target.value)}),t.jsxs("select",{value:u,onChange:i=>g(i.target.value),style:{marginBottom:8},children:[t.jsx("option",{value:"none",children:"Does not repeat"}),t.jsx("option",{value:"daily",children:"Daily"}),t.jsx("option",{value:"weekly",children:"Weekly"})]}),t.jsx("button",{type:"submit",children:"Add Task"})]})},{ipcRenderer:h}=window.require("electron"),S=({fetchTasksRef:o})=>{const[a,c]=r.useState([]),d=r.useCallback(()=>{h.invoke("tasks:get").then(e=>{c(e)})},[]);return r.useEffect(()=>{h.invoke("ping").then(e=>{console.log("Ping result:",e)}),d(),o&&(o.current=d)},[d,o]),t.jsx("div",{className:"task-list",children:a.length===0?t.jsx("div",{children:"No tasks found."}):t.jsx("ul",{children:a.map(e=>t.jsxs("li",{children:[t.jsx("strong",{children:e.title})," (",e.start," - ",e.end,")",e.completed&&" ✅",e.repeat&&e.repeat!=="none"&&t.jsxs("span",{style:{marginLeft:8,color:"#888",fontSize:"0.9em"},children:["[Repeats: ",e.repeat.charAt(0).toUpperCase()+e.repeat.slice(1),"]"]})]},e.id))})})},M=[{key:"tasks",label:"Tasks"},{key:"hud",label:"HUD Options"},{key:"about",label:"About"}],p={darkMode:!1,showCurrentTime:!1,clickThrough:!0,opacity:.85},v=()=>{try{const o=localStorage.getItem("hudSettings");if(o)return{...p,...JSON.parse(o)}}catch{}return{...p}},T=o=>{if(localStorage.setItem("hudSettings",JSON.stringify(o)),window.require){const{ipcRenderer:a}=window.require("electron");a.send("hud-settings-update",o)}},w=()=>{const[o,a]=r.useState("tasks"),c=r.useRef(()=>{}),d=r.useCallback(()=>{c.current&&c.current()},[]),[e,l]=r.useState(v());r.useEffect(()=>{T(e)},[e]),r.useEffect(()=>{const n=e.darkMode?"#23272f":"#f6f7fb";document.body.style.background=n;const s=document.getElementById("root");s&&(s.style.background=n)},[e.darkMode]);const f=()=>{l({...p})};return t.jsxs("div",{style:{display:"flex",height:"100vh",width:"100vw",background:e.darkMode?"#23272f":"#f6f7fb",fontFamily:"Inter, Arial, sans-serif",color:e.darkMode?"#f3f3f3":"#222",transition:"background 0.2s, color 0.2s",margin:0,padding:0,boxSizing:"border-box"},children:[t.jsx("nav",{style:{width:160,height:"100vh",background:e.darkMode?"#181b20":"#fff",borderRight:e.darkMode?"1px solid #2c2f36":"1px solid #eee",display:"flex",flexDirection:"column",alignItems:"stretch",padding:0,boxShadow:e.darkMode?"2px 0 8px rgba(0,0,0,0.12)":"2px 0 8px rgba(0,0,0,0.03)",transition:"background 0.2s, border 0.2s"},children:t.jsx("div",{style:{padding:"24px 0",flex:1,display:"flex",flexDirection:"column"},children:M.map(n=>t.jsx("button",{onClick:()=>a(n.key),style:{background:o===n.key?e.darkMode?"#23272f":"#e3e8f0":"none",border:"none",borderLeft:o===n.key?"4px solid #4fa3e3":"4px solid transparent",color:e.darkMode?o===n.key?"#fff":"#b3b3b3":"#222",fontWeight:o===n.key?700:400,fontSize:16,padding:"12px 20px",textAlign:"left",cursor:"pointer",outline:"none",transition:"background 0.2s, border 0.2s, color 0.2s"},children:n.label},n.key))})}),t.jsxs("main",{style:{flex:1,padding:"32px 40px",background:e.darkMode?"#23272f":"#f6f7fb",display:"flex",flexDirection:"column",minWidth:0,color:e.darkMode?"#f3f3f3":"#222",transition:"background 0.2s, color 0.2s",minHeight:"100vh",boxSizing:"border-box"},children:[o==="tasks"&&t.jsxs(t.Fragment,{children:[t.jsx("h2",{style:{fontWeight:700,fontSize:24,marginBottom:16,color:e.darkMode?"#f3f3f3":"#222"},children:"Manage Tasks"}),t.jsx(j,{onTaskAdded:d}),t.jsx(S,{fetchTasksRef:c})]}),o==="hud"&&t.jsxs(t.Fragment,{children:[t.jsx("h2",{style:{fontWeight:700,fontSize:24,marginBottom:16,color:e.darkMode?"#f3f3f3":"#222"},children:"HUD Options"}),t.jsxs("div",{style:{color:e.darkMode?"#f3f3f3":"#222",fontSize:16,marginTop:24,maxWidth:400},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:18,gap:10},children:[t.jsx("input",{type:"checkbox",checked:e.darkMode,onChange:n=>l(s=>({...s,darkMode:n.target.checked}))}),"Dark mode"]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:18,gap:10},children:[t.jsx("input",{type:"checkbox",checked:e.showCurrentTime,onChange:n=>l(s=>({...s,showCurrentTime:n.target.checked}))}),"Show current time"]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:18,gap:10},children:[t.jsx("input",{type:"checkbox",checked:e.clickThrough,onChange:n=>l(s=>({...s,clickThrough:n.target.checked}))}),"Enable click-through"]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:18,gap:10},children:["Opacity",t.jsx("input",{type:"range",min:.5,max:1,step:.01,value:e.opacity,onChange:n=>l(s=>({...s,opacity:Number(n.target.value)})),style:{flex:1,marginLeft:12}}),t.jsxs("span",{style:{width:40,textAlign:"right",color:e.darkMode?"#b3b3b3":"#888",fontSize:15},children:[Math.round(e.opacity*100),"%"]})]}),t.jsx("button",{onClick:f,style:{marginTop:12,background:e.darkMode?"#23272f":"#f3f3f3",border:e.darkMode?"1px solid #444":"1px solid #ddd",borderRadius:6,padding:"8px 18px",fontSize:15,color:e.darkMode?"#f3f3f3":"#444",cursor:"pointer",fontWeight:500,transition:"background 0.2s, border 0.2s"},children:"Reset to Defaults"})]}),t.jsxs("div",{style:{marginTop:40,background:e.darkMode?"rgba(30,34,40,0.95)":`rgba(0,0,0,${e.opacity})`,borderRadius:10,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",padding:24,color:e.darkMode?"#f3f3f3":"#fff",minHeight:80,maxWidth:340,fontSize:18,fontWeight:500,letterSpacing:.2,display:"flex",flexDirection:"column",alignItems:"center",border:e.darkMode?"1.5px solid #222":"1.5px solid #2222",transition:"background 0.2s, color 0.2s"},children:[t.jsx("span",{style:{fontWeight:700,fontSize:20,marginBottom:6,color:e.darkMode?"#b3d1f7":"#cce6ff"},children:"HUD Preview"}),t.jsxs("span",{style:{fontSize:16,color:e.darkMode?"#b3d1f7":"#cce6ff"},children:["Current Task: ",t.jsx("b",{style:{color:(e.darkMode,"#fff")},children:"Example Task"})]}),e.showCurrentTime&&t.jsx("span",{style:{fontSize:15,color:e.darkMode?"#eee":"#e0e0e0",marginTop:4},children:"12:34:56 PM"}),t.jsx("span",{style:{fontSize:15,color:e.darkMode?"#eee":"#e0e0e0",marginTop:4},children:"(00:12:34 left)"})]})]}),o==="about"&&t.jsxs(t.Fragment,{children:[t.jsx("h2",{style:{fontWeight:700,fontSize:24,marginBottom:16,color:e.darkMode?"#f3f3f3":"#222"},children:"About"}),t.jsxs("div",{style:{color:e.darkMode?"#b3b3b3":"#666",fontSize:16,marginTop:24},children:[t.jsx("p",{children:"Time Keeper v1.0"}),t.jsx("p",{children:"Modern minimalist time/task HUD for desktop."}),t.jsxs("p",{style:{fontSize:14,color:e.darkMode?"#888":"#aaa",marginTop:16},children:["© ",new Date().getFullYear()," Time Keeper"]})]})]})]})]})},x=document.getElementById("root");x&&b(x).render(t.jsx(w,{}));
