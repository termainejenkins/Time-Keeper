import{r,j as e,c as Q}from"./client-C9yhCDaK.js";const{ipcRenderer:X}=window.require("electron"),Z=({onTaskAdded:n})=>{const[f,p]=r.useState(""),[g,o]=r.useState(""),[d,u]=r.useState(""),[x,c]=r.useState(""),[k,s]=r.useState("none"),y=async l=>{if(l.preventDefault(),!f||!g||!d)return;const v=await X.invoke("tasks:add",{title:f,start:g,end:d,description:x,repeat:k});p(""),o(""),u(""),c(""),s("none"),n&&n(v)};return e.jsxs("form",{className:"task-form",onSubmit:y,style:{marginBottom:16},children:[e.jsx("input",{type:"text",placeholder:"Title",value:f,onChange:l=>p(l.target.value),required:!0}),e.jsx("input",{type:"datetime-local",placeholder:"Start",value:g,onChange:l=>o(l.target.value),required:!0}),e.jsx("input",{type:"datetime-local",placeholder:"End",value:d,onChange:l=>u(l.target.value),required:!0}),e.jsx("input",{type:"text",placeholder:"Description (optional)",value:x,onChange:l=>c(l.target.value)}),e.jsxs("select",{value:k,onChange:l=>s(l.target.value),style:{marginBottom:8},children:[e.jsx("option",{value:"none",children:"Does not repeat"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"})]}),e.jsx("button",{type:"submit",children:"Add Task"})]})},{ipcRenderer:W}=window.require("electron"),ee=({fetchTasksRef:n})=>{const[f,p]=r.useState([]),g=r.useCallback(()=>{W.invoke("tasks:get").then(o=>{p(o)})},[]);return r.useEffect(()=>{W.invoke("ping").then(o=>{console.log("Ping result:",o)}),g(),n&&(n.current=g)},[g,n]),e.jsx("div",{className:"task-list",children:f.length===0?e.jsx("div",{children:"No tasks found."}):e.jsx("ul",{children:f.map(o=>{const d=new Date(o.start),u=new Date(o.end),x=`${d.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})} - ${u.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}`,c=`${d.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!0})} - ${u.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!0})}`;return e.jsxs("li",{children:[e.jsx("strong",{children:o.title})," (",x,e.jsx("span",{style:{color:"#bbb",margin:"0 8px"},children:"•"}),e.jsx("span",{style:{color:"#888",fontSize:"0.97em"},children:c}),")",o.completed&&" ✅",o.repeat&&o.repeat!=="none"&&e.jsxs("span",{style:{marginLeft:8,color:"#888",fontSize:"0.9em"},children:["[Repeats: ",o.repeat.charAt(0).toUpperCase()+o.repeat.slice(1),"]"]})]},o.id)})})})};console.log("Manage.tsx loaded!");const te=[{key:"tasks",label:"Tasks"},{key:"hud",label:"HUD Options"},{key:"updates",label:"Updates"},{key:"archive",label:"Archive"},{key:"about",label:"About"}],R={darkMode:!1,showCurrentTime:!1,clickThrough:!0,opacity:.85,placement:"top-center",alwaysOnTop:!0},oe="both";function ne(){return localStorage.getItem("viewMode")||oe}function re(n){localStorage.setItem("viewMode",n)}const ie=()=>{try{const n=localStorage.getItem("hudSettings");if(n)return{...R,...JSON.parse(n)}}catch{}return{...R}},ae=n=>{if(localStorage.setItem("hudSettings",JSON.stringify(n)),window.require){const{ipcRenderer:f}=window.require("electron");console.log("[Renderer] Sending hud-settings-update:",n),f.send("hud-settings-update",n)}},se=()=>{const[n,f]=r.useState("tasks"),p=r.useRef(()=>{}),g=r.useCallback(()=>{p.current&&p.current()},[]),[o,d]=r.useState(ie()),[u,x]=r.useState(""),[c,k]=r.useState("idle"),[s,y]=r.useState(null),[l,v]=r.useState(!0),[z,L]=r.useState(!1),[b,I]=r.useState(ne()),U=t=>{I(t.target.value),re(t.target.value)},i=window.require?window.require("electron").ipcRenderer:null,[B,E]=r.useState([]),j=r.useCallback(()=>{i&&i.invoke("get-archived-tasks").then(E)},[i]);r.useEffect(()=>{n==="archive"&&j()},[n,j]);const N=t=>{i&&i.invoke("restore-archived-task",t).then(j)},H=t=>{i&&i.invoke("delete-archived-task",t).then(j)},[S,q]=r.useState([]),[h,F]=r.useState(""),[w,D]=r.useState(""),[V,M]=r.useState(null),[T,C]=r.useState(""),m=r.useCallback(()=>{i&&(i.invoke("get-task-lists").then(q),i.invoke("get-active-task-list-id").then(F))},[i]);r.useEffect(()=>{n==="tasks"&&m()},[n,m]);const O=t=>{i&&i.invoke("set-active-task-list",t).then(m)},$=()=>{i&&w.trim()&&i.invoke("create-task-list",w.trim()).then(()=>{D(""),m()})},P=t=>{i&&T.trim()&&i.invoke("rename-task-list",t,T.trim()).then(()=>{M(null),C(""),m()})},_=t=>{i&&i.invoke("delete-task-list",t).then(m)};r.useEffect(()=>{ae(o)},[o]),r.useEffect(()=>{const t=o.darkMode?"#23272f":"#f6f7fb";document.body.style.background=t;const a=document.getElementById("root");a&&(a.style.background=t)},[o.darkMode]),r.useEffect(()=>{if(n==="hud"&&(console.log("Rendering HUD Options section"),window.require)){const{ipcRenderer:t}=window.require("electron");t.send("test-event",{foo:123}),console.log("[Renderer] Sent test-event")}},[n]),r.useEffect(()=>(i&&(i.invoke("get-app-version").then(x),i.invoke("get-update-status").then(t=>{k(t.status),y(t.info),v(t.autoUpdate)}),i.on("update-status",(t,{status:a,info:Y})=>{k(a),y(Y),L(!1)})),()=>{i&&i.removeAllListeners("update-status")}),[]);const G=()=>{i&&(L(!0),i.invoke("check-for-updates"))},J=t=>{const a=t.target.checked;v(a),i&&i.invoke("set-auto-update",a)},K=()=>{d({...R})};return e.jsxs("div",{style:{display:"flex",height:"100vh",width:"100vw",background:o.darkMode?"#23272f":"#f6f7fb",fontFamily:"Inter, Arial, sans-serif",color:o.darkMode?"#f3f3f3":"#222",transition:"background 0.2s, color 0.2s",margin:0,padding:0,boxSizing:"border-box"},children:[e.jsx("nav",{style:{width:160,height:"100vh",background:o.darkMode?"#181b20":"#fff",borderRight:o.darkMode?"1px solid #2c2f36":"1px solid #eee",display:"flex",flexDirection:"column",alignItems:"stretch",padding:0,boxShadow:o.darkMode?"2px 0 8px rgba(0,0,0,0.12)":"2px 0 8px rgba(0,0,0,0.03)",transition:"background 0.2s, border 0.2s"},children:e.jsx("div",{style:{padding:"24px 0",flex:1,display:"flex",flexDirection:"column"},children:te.map(t=>e.jsx("button",{onClick:()=>f(t.key),style:{background:n===t.key?o.darkMode?"#23272f":"#e3e8f0":"none",border:"none",borderLeft:n===t.key?"4px solid #4fa3e3":"4px solid transparent",color:o.darkMode?n===t.key?"#fff":"#b3b3b3":"#222",fontWeight:n===t.key?700:400,fontSize:16,padding:"12px 20px",textAlign:"left",cursor:"pointer",outline:"none",transition:"background 0.2s, border 0.2s, color 0.2s"},children:t.label},t.key))})}),e.jsxs("main",{style:{flex:1,padding:"32px 40px",background:o.darkMode?"#23272f":"#f6f7fb",display:"flex",flexDirection:"column",minWidth:0,color:o.darkMode?"#f3f3f3":"#222",transition:"background 0.2s, color 0.2s",minHeight:"100vh",boxSizing:"border-box"},children:[e.jsxs("div",{style:{marginBottom:32,marginTop:8},children:[e.jsx("label",{style:{fontWeight:600,fontSize:17,marginRight:12},children:"View Mode:"}),e.jsxs("select",{value:b,onChange:U,style:{fontSize:16,padding:"4px 12px",borderRadius:6},children:[e.jsx("option",{value:"local",children:"Local Tasks"}),e.jsx("option",{value:"google",children:"Google Calendar"}),e.jsx("option",{value:"both",children:"Both"})]})]}),n==="tasks"&&e.jsxs(e.Fragment,{children:[(b==="local"||b==="both")&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{style:{fontWeight:700,fontSize:24,marginBottom:16,color:o.darkMode?"#f3f3f3":"#222"},children:"Tasks"}),e.jsxs("div",{style:{marginBottom:18},children:[e.jsx("label",{style:{fontWeight:700,fontSize:17,marginRight:10,color:o.darkMode?"#fff":"#222"},children:"Active Task List:"}),e.jsx("select",{value:h,onChange:t=>O(t.target.value),style:{fontSize:16,padding:"5px 12px",borderRadius:6,marginRight:10,background:o.darkMode?"#23272f":"#fff",color:o.darkMode?"#fff":"#222",border:"2px solid #4fa3e3",fontWeight:700,boxShadow:"0 2px 8px rgba(79,163,227,0.10)"},children:S.map(t=>e.jsx("option",{value:t.id,style:{background:t.id===h?"#4fa3e3":o.darkMode?"#23272f":"#fff",color:t.id===h?"#fff":o.darkMode?"#f3f3f3":"#222",fontWeight:t.id===h?700:500},children:t.name},t.id))}),e.jsx("input",{type:"text",value:w,onChange:t=>D(t.target.value),placeholder:"New list name",style:{fontSize:15,padding:"4px 10px",borderRadius:6,marginRight:6,background:o.darkMode?"#23272f":"#fff",color:o.darkMode?"#fff":"#222",border:"1px solid #aaa"}}),e.jsx("button",{onClick:$,style:{fontSize:15,padding:"4px 12px",borderRadius:6,background:"#4fa3e3",color:"#fff",border:"none",fontWeight:700,boxShadow:"0 1px 4px rgba(0,0,0,0.07)"},children:"+ New"})]}),e.jsx("div",{style:{marginBottom:18,display:"flex",gap:10,flexWrap:"wrap"},children:S.map(t=>e.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:4,background:t.id===h?"#4fa3e3":o.darkMode?"#23272f":"#f6f7fb",borderRadius:6,padding:"2px 12px",color:t.id===h?"#fff":o.darkMode?"#f3f3f3":"#222",fontWeight:t.id===h?700:500,border:t.id===h?"2px solid #4fa3e3":"1px solid #ccc",boxShadow:t.id===h?"0 2px 8px rgba(79,163,227,0.10)":"none"},children:V===t.id?e.jsxs(e.Fragment,{children:[e.jsx("input",{value:T,onChange:a=>C(a.target.value),style:{fontSize:14,padding:"2px 6px",borderRadius:4,background:o.darkMode?"#23272f":"#fff",color:o.darkMode?"#fff":"#222",border:"1px solid #aaa"}}),e.jsx("button",{onClick:()=>P(t.id),style:{fontSize:13,marginLeft:2,color:"#4fa3e3",fontWeight:700,background:"none",border:"none",cursor:"pointer"},children:"Save"}),e.jsx("button",{onClick:()=>M(null),style:{fontSize:13,marginLeft:2,color:"#e34f4f",fontWeight:700,background:"none",border:"none",cursor:"pointer"},children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:t.name}),e.jsx("button",{onClick:()=>{M(t.id),C(t.name)},style:{fontSize:13,marginLeft:2,color:t.id===h?"#fff":"#4fa3e3",fontWeight:700,background:"none",border:"none",cursor:"pointer"},children:"Rename"}),S.length>1&&e.jsx("button",{onClick:()=>_(t.id),style:{fontSize:13,marginLeft:2,color:"#e34f4f",fontWeight:700,background:"none",border:"none",cursor:"pointer"},children:"Delete"})]})},t.id))}),e.jsx(Z,{onTaskAdded:g}),e.jsx(ee,{fetchTasksRef:p})]}),(b==="google"||b==="both")&&e.jsx("div",{style:{marginTop:32,color:"#4fa3e3",fontSize:18},children:e.jsx("b",{children:"Google Calendar events will appear here (integration coming soon)."})})]}),n==="hud"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{style:{fontWeight:700,fontSize:24,marginBottom:16,color:o.darkMode?"#f3f3f3":"#222"},children:"HUD Options"}),e.jsxs("div",{style:{color:o.darkMode?"#f3f3f3":"#222",fontSize:16,marginTop:24,maxWidth:400},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:18,gap:10},children:[e.jsx("input",{type:"checkbox",checked:o.darkMode,onChange:t=>d(a=>({...a,darkMode:t.target.checked}))}),"Dark mode"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:18,gap:10},children:[e.jsx("input",{type:"checkbox",checked:o.showCurrentTime,onChange:t=>d(a=>({...a,showCurrentTime:t.target.checked}))}),"Show current time"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:18,gap:10},children:[e.jsx("input",{type:"checkbox",checked:o.clickThrough,onChange:t=>d(a=>({...a,clickThrough:t.target.checked}))}),"Enable click-through"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:18,gap:10},children:[e.jsx("input",{type:"checkbox",checked:o.alwaysOnTop,onChange:t=>d(a=>({...a,alwaysOnTop:t.target.checked}))}),"Always on Top"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:18,gap:10},children:["Placement",e.jsxs("select",{value:o.placement,onChange:t=>{console.log("[Renderer] Placement changed to:",t.target.value),d(a=>({...a,placement:t.target.value}))},style:{marginLeft:12},children:[e.jsx("option",{value:"top-left",children:"Top Left"}),e.jsx("option",{value:"top-center",children:"Top Center"}),e.jsx("option",{value:"top-right",children:"Top Right"}),e.jsx("option",{value:"bottom-left",children:"Bottom Left"}),e.jsx("option",{value:"bottom-center",children:"Bottom Center"}),e.jsx("option",{value:"bottom-right",children:"Bottom Right"}),e.jsx("option",{value:"center",children:"Center"})]})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:18,gap:10},children:["Opacity",e.jsx("input",{type:"range",min:.5,max:1,step:.01,value:o.opacity,onChange:t=>d(a=>({...a,opacity:Number(t.target.value)})),style:{flex:1,marginLeft:12}}),e.jsxs("span",{style:{width:40,textAlign:"right",color:o.darkMode?"#b3b3b3":"#888",fontSize:15},children:[Math.round(o.opacity*100),"%"]})]}),e.jsx("button",{onClick:K,style:{marginTop:12,background:o.darkMode?"#23272f":"#f3f3f3",border:o.darkMode?"1px solid #444":"1px solid #ddd",borderRadius:6,padding:"8px 18px",fontSize:15,color:o.darkMode?"#f3f3f3":"#444",cursor:"pointer",fontWeight:500,transition:"background 0.2s, border 0.2s"},children:"Reset to Defaults"})]}),e.jsxs("div",{style:{marginTop:40,background:o.darkMode?"rgba(30,34,40,0.95)":`rgba(0,0,0,${o.opacity})`,borderRadius:10,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",padding:24,color:o.darkMode?"#f3f3f3":"#fff",minHeight:80,maxWidth:340,fontSize:18,fontWeight:500,letterSpacing:.2,display:"flex",flexDirection:"column",alignItems:"center",border:o.darkMode?"1.5px solid #222":"1.5px solid #2222",transition:"background 0.2s, color 0.2s"},children:[e.jsx("span",{style:{fontWeight:700,fontSize:20,marginBottom:6,color:o.darkMode?"#b3d1f7":"#cce6ff"},children:"HUD Preview"}),e.jsxs("span",{style:{fontSize:16,color:o.darkMode?"#b3d1f7":"#cce6ff"},children:["Current Task: ",e.jsx("b",{style:{color:(o.darkMode,"#fff")},children:"Example Task"})]}),o.showCurrentTime&&e.jsx("span",{style:{fontSize:15,color:o.darkMode?"#eee":"#e0e0e0",marginTop:4},children:"12:34:56 PM"}),e.jsx("span",{style:{fontSize:15,color:o.darkMode?"#eee":"#e0e0e0",marginTop:4},children:"(00:12:34 left)"})]})]}),n==="updates"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{style:{fontWeight:700,fontSize:24,marginBottom:16,color:o.darkMode?"#f3f3f3":"#222"},children:"Updates"}),e.jsxs("div",{style:{color:o.darkMode?"#f3f3f3":"#222",fontSize:16,marginTop:24,maxWidth:500},children:[e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("b",{children:"Current Version:"})," ",u]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("b",{children:"Update Status:"})," ",z?"Checking...":c.charAt(0).toUpperCase()+c.slice(1)]}),c==="available"&&s&&e.jsxs("div",{style:{marginBottom:12,color:"#4fa3e3"},children:[e.jsx("b",{children:"New version available:"})," ",s.version||""]}),c==="downloading"&&s&&e.jsxs("div",{style:{marginBottom:12,color:"#4fa3e3"},children:[e.jsx("b",{children:"Downloading update..."})," ",s.percent?`${Math.round(s.percent)}%`:""]}),c==="downloaded"&&s&&e.jsxs("div",{style:{marginBottom:12,color:"#4fa3e3"},children:[e.jsx("b",{children:"Update downloaded!"})," Restart the app to apply the update."]}),c==="error"&&s&&e.jsxs("div",{style:{marginBottom:12,color:"red"},children:[e.jsx("b",{children:"Update error:"})," ",s.message||String(s)]}),s&&s.releaseNotes&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("b",{children:"Release Notes:"}),e.jsx("div",{style:{background:"#2222",padding:10,borderRadius:6,marginTop:4,maxHeight:120,overflowY:"auto",fontSize:15},dangerouslySetInnerHTML:{__html:s.releaseNotes}})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("button",{onClick:G,disabled:z,style:{background:"#4fa3e3",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontSize:15,cursor:"pointer",fontWeight:500,marginRight:16},children:"Check for Updates"}),e.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:8,fontSize:15},children:[e.jsx("input",{type:"checkbox",checked:l,onChange:J}),"Enable Auto-Update"]})]})]})]}),n==="archive"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{style:{fontWeight:700,fontSize:24,marginBottom:16,color:o.darkMode?"#f3f3f3":"#222"},children:"Archive"}),e.jsxs("div",{style:{color:o.darkMode?"#f3f3f3":"#222",fontSize:16,marginTop:24,maxWidth:600},children:[B.length===0&&e.jsx("div",{children:"No archived tasks."}),B.map(t=>e.jsxs("div",{style:{background:o.darkMode?"#23272f":"#f6f7fb",border:"1px solid #ccc",borderRadius:8,padding:16,marginBottom:14,display:"flex",flexDirection:"column",gap:6},children:[e.jsx("div",{children:e.jsx("b",{children:t.title})}),e.jsxs("div",{style:{fontSize:14,color:"#888"},children:["Ended: ",new Date(t.end).toLocaleString()]}),t.expiredAt&&e.jsxs("div",{style:{fontSize:13,color:"#aaa"},children:["Archived: ",new Date(t.expiredAt+24*60*60*1e3).toLocaleString()]}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:6},children:[e.jsx("button",{onClick:()=>N(t.id),style:{background:"#4fa3e3",color:"#fff",border:"none",borderRadius:6,padding:"6px 14px",fontSize:14,cursor:"pointer",fontWeight:500},children:"Restore"}),e.jsx("button",{onClick:()=>H(t.id),style:{background:"#e34f4f",color:"#fff",border:"none",borderRadius:6,padding:"6px 14px",fontSize:14,cursor:"pointer",fontWeight:500},children:"Delete"})]})]},t.id))]})]}),n==="about"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{style:{fontWeight:700,fontSize:24,marginBottom:16,color:o.darkMode?"#f3f3f3":"#222"},children:"About"}),e.jsxs("div",{style:{color:o.darkMode?"#b3b3b3":"#666",fontSize:16,marginTop:24},children:[e.jsx("p",{children:"Time Keeper v1.0"}),e.jsx("p",{children:"Modern minimalist time/task HUD for desktop."}),e.jsxs("p",{style:{fontSize:14,color:o.darkMode?"#888":"#aaa",marginTop:16},children:["© ",new Date().getFullYear()," Time Keeper"]})]})]})]})]})},A=document.getElementById("root");A&&Q(A).render(e.jsx(se,{}));
